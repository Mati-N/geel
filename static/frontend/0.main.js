(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{109:function(e,t,n){"use strict";n.r(t);var a=n(40),r=n.n(a),o=n(21),c=n.n(o),l=n(0),s=n.n(l),i=n(8),u=n(30),m=n(22),p=n(32);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=Object(l.lazy)((function(){return n.e(14).then(n.bind(null,120))})),b=Object(l.lazy)((function(){return n.e(13).then(n.bind(null,121))})),O=Object(l.lazy)((function(){return n.e(12).then(n.bind(null,122))}));t.default=function(e){var t=e.text,n=e.title,a=e.username,r=e.id,o=e.likes,f=e.creation,k=e.user_id,g={done:!1,likes:o,hasMore:!1,height:"32vh",loading:!1,comments:e.comments,expand:!1},v=Object(i.useLazyQuery)(u.h,{variables:{post_id:r},onCompleted:function(e){z(h(h({},S),{},{liked:e.liked}))}}),j=c()(v,1)[0],y=Object(l.useState)(!1),x=c()(y,2),E=x[0],N=x[1],M=Object(l.useRef)(null),w=Object(i.useMutation)(u.g),P=c()(w,1)[0],H=Object(l.useState)(g),D=c()(H,2),S=D[0],z=D[1],C=Object(p.c)({to:{maxHeight:S.expand?"".concat(M.current.scrollHeight,"px"):"230px",height:S.expand?"".concat(M.current.scrollHeight,"px"):"230px"},from:{maxHeight:S.expand?"".concat(M.current.scrollHeight,"px"):"230px",height:S.expand?"".concat(M.current.scrollHeight,"px"):"230px"},duration:"1s"});Object(l.useEffect)((function(){j(),z(h(h({},S),{},{hasMore:M.current.scrollHeight>M.current.clientHeight,loading:!1}))}),[]);return s.a.createElement("div",{className:"post card"},s.a.createElement("div",{className:"post-top card-top"},s.a.createElement("div",{className:"post-info-top"},s.a.createElement(m.Link,{to:"user/".concat(k),className:"post-user"}," ",a," "),s.a.createElement("small",{className:"post-time"},function(e){var t=Math.floor((new Date-e)/1e3),n=t/31536e3;if(n>1){var a=Math.floor(n);return Math.floor(n)+(1===a?" year":" years")}if((n=t/2592e3)>1){var r=Math.floor(n);return r+(1===r?" month":" months")}if((n=t/86400)>1){var o=Math.floor(n);return Math.floor(o)+(1===o?" day":" days")}if((n=t/3600)>1){var c=Math.floor(n);return c+(1===c?" hour":" hours")}if((n=t/60)>1){var l=Math.floor(n);return l+(1==l?" minute":" minutes")}return"Seconds"}(new Date(f))," ago"," ")),s.a.createElement("h5",{className:"post-title"},n)),s.a.createElement(p.a.pre,{ref:M,className:"post-text",style:S.hasMore?C:{}},t,S.hasMore&&s.a.createElement("button",{className:"more",onClick:function(){z(h(h({},S),{},{expand:!S.expand}))}},S.expand?"less":"more")),!S.loading&&s.a.createElement("div",{className:"info-bottom"},s.a.createElement("span",{className:"like",onClick:function(){P({variables:{post_id:r}}).catch((function(e){return console.log(e)})).then((function(e){var t=e.data.likePost;z(h(h({},S),{},{liked:!S.liked,likes:t.post.likers.length}))}))},onMouseOver:function(){return N(!0)},onMouseOut:function(){return N(!1)}},E?S.liked?s.a.createElement(b,{className:"like-icon"}):s.a.createElement(d,{className:"like-icon"}):S.liked?s.a.createElement(d,{className:"like-icon"}):s.a.createElement(b,{className:"like-icon"}),S.likes>0&&S.likes),s.a.createElement("span",{className:"like"},s.a.createElement(m.Link,{to:"/post/".concat(r),className:"like-icon"},s.a.createElement(O,null)),S.comments>0&&S.comments)))}}}]);
//# sourceMappingURL=0.main.js.map