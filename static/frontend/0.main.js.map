{"version":3,"sources":["webpack:///./src/components/SVG/Like.svg","webpack:///./src/components/SVG/Heart.svg","webpack:///./src/components/SVG/Comments.svg","webpack:///./src/components/post/PostItem.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","d","fill","_ref2","props","className","viewBox","PostItem","text","title","username","id","likes","creation","user_id","initialState","done","hasMore","height","loading","comments","useLazyQuery","LIKED","variables","post_id","onCompleted","data","setState","state","liked","useState","hovered","setHovered","self","useRef","useMutation","LIKE","likePost","expandText","useSpring","to","maxHeight","expand","current","scrollHeight","from","duration","useEffect","clientHeight","date","seconds","Math","floor","Date","interval","flr","timeSince","pre","ref","style","onClick","error","console","log","then","post","likers","onMouseOver","onMouseOut","Heart","Like","Comments"],"mappings":"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","file":"0.main.js","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nvar _ref = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M376.951 28.507h-.899c-66.027 0-102.942 48.32-120.049 81.033-17.408-32.714-54.022-81.033-120.049-81.033h-1.199C63.324 29.108 3.792 90.032.191 167.164c-4.503 94.538 70.937 158.164 183.782 254.204 19.509 16.807 40.218 34.515 62.126 53.423l9.905 8.703 9.905-8.703c21.608-18.908 42.617-36.616 62.126-53.423 112.844-96.04 188.278-159.666 183.775-254.204-3.604-77.133-63.429-138.057-134.859-138.657z\",\n  fill: \"#ff3636\"\n});\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M511.808 167.164c4.503 94.538-70.93 158.164-183.775 254.204-19.509 16.807-40.518 34.515-62.126 53.423l-9.905 8.703V109.54c17.107-32.714 54.022-81.033 120.049-81.033h.899c71.431.6 131.256 61.524 134.858 138.657z\",\n  fill: \"#39cccc\"\n});\n\nfunction SvgLike(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    className: \"Like_svg__like-svg\",\n    viewBox: \"0 0 512 512\"\n  }, props), _ref, _ref2);\n}\n\nexport default SvgLike;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nvar _ref = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M378.667 21.333c-56.792 0-103.698 52.75-122.667 77.646-18.969-24.896-65.875-77.646-122.667-77.646C59.813 21.333 0 88.927 0 172c0 45.323 17.99 87.562 49.479 116.469a10.54 10.54 0 001.677 2.177l197.313 196.906c2.083 2.073 4.802 3.115 7.531 3.115s5.458-1.042 7.542-3.125L467.417 283.74l2.104-2.042c1.667-1.573 3.313-3.167 5.156-5.208a10.372 10.372 0 001.896-2.542C499.438 245.948 512 209.833 512 172c0-83.073-59.812-150.667-133.333-150.667zm80.156 240.615a9.929 9.929 0 00-.802 1.083c-1 1.146-2.094 2.156-3.177 3.188L255.99 464.927 68.667 277.979a10.706 10.706 0 00-2.479-3.177C37.677 249.906 21.333 212.437 21.333 172c0-71.313 50.24-129.333 112-129.333 61.063 0 113.177 79.646 113.698 80.448 3.938 6.083 14 6.083 17.938 0 .521-.802 52.635-80.448 113.698-80.448 61.76 0 112 58.021 112 129.333 0 33.604-11.313 65.552-31.844 89.948z\",\n  fill: \"#aaa\"\n});\n\nfunction SvgHeart(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    className: \"Heart_svg__like-svg\",\n    viewBox: \"0 0 512 512\"\n  }, props), _ref);\n}\n\nexport default SvgHeart;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nvar _ref = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"Comments_svg__cls-1\",\n  fill: \"#3b4551\",\n  d: \"M112.973 11.062H15.027c-7.454 0-13.993 6.975-13.993 14.926v58.301c0 7.445 6.016 13.06 13.993 13.06h46.326l17.985 18.202a4.663 4.663 0 006.637 0l17.987-18.203h9.011c7.978 0 13.993-5.614 13.993-13.059V25.988c0-7.95-6.539-14.926-13.993-14.926zm4.664 73.227c0 2.754-2.512 3.73-4.664 3.73h-10.96a4.663 4.663 0 00-3.319 1.388l-16.038 16.23-16.037-16.23a4.661 4.661 0 00-3.318-1.387H15.027c-2.152 0-4.664-.977-4.664-3.73V25.987c0-2.774 2.353-5.598 4.664-5.598h97.946c2.31 0 4.664 2.824 4.664 5.598z\"\n});\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  className: \"Comments_svg__cls-2\",\n  fill: \"#2b77c0\",\n  d: \"M89.653 33.765H38.347a3.498 3.498 0 100 6.996h51.306a3.498 3.498 0 100-6.996zM89.653 50.707H38.347a3.498 3.498 0 100 6.996h51.306a3.498 3.498 0 100-6.996zM89.653 67.648H38.347a3.498 3.498 0 100 6.997h51.306a3.498 3.498 0 100-6.997z\"\n});\n\nfunction SvgComments(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    \"data-name\": \"Layer 1\",\n    viewBox: \"0 0 128 128\",\n    className: \"Comments_svg__like-svg\"\n  }, props), _ref, _ref2);\n}\n\nexport default SvgComments;","import React, { useState, useEffect, useRef } from \"react\";\r\nimport { useLazyQuery, useMutation } from \"@apollo/client\";\r\nimport { LIKED, LIKE } from \"../../Queries\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useSpring, animated } from \"react-spring\";\r\nimport Liked from \"../SVG/Like.svg\";\r\nimport Heart from \"../SVG/Heart.svg\";\r\nimport Comments from \"../SVG/Comments.svg\";\r\n\r\nconst PostItem = ({\r\n  text,\r\n  title,\r\n  username,\r\n  id,\r\n  likes,\r\n  creation,\r\n  user_id,\r\n  comments,\r\n}) => {\r\n  const initialState = {\r\n    done: false,\r\n    likes,\r\n    hasMore: false,\r\n    height: \"32vh\",\r\n    loading: false,\r\n    comments,\r\n  };\r\n  const [liked] = useLazyQuery(LIKED, {\r\n    variables: { post_id: id },\r\n    onCompleted: (data) => {\r\n      setState({ ...state, liked: data.liked });\r\n    },\r\n  });\r\n\r\n  const [hovered, setHovered] = useState(false);\r\n  const self = useRef(null);\r\n\r\n  const [likePost] = useMutation(LIKE);\r\n  const [state, setState] = useState(initialState);\r\n\r\n  const expandText = useSpring({\r\n    to: {\r\n      maxHeight: state.expand ? `${self.current.scrollHeight}px` : \"230px\",\r\n      height: state.expand ? `${self.current.scrollHeight}px` : \"230px\",\r\n    },\r\n    from: {\r\n      maxHeight: !state.expand ? \"230px\" : `${self.current.scrollHeight}px`,\r\n      height: !state.expand ? \"230px\" : `${self.current.scrollHeight}px`,\r\n    },\r\n    duration: \"1s\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    liked();\r\n    setState({\r\n      ...state,\r\n      hasMore: self.current.scrollHeight > self.current.clientHeight,\r\n      loading: false,\r\n    });\r\n  }, []);\r\n\r\n  const timeSince = (date) => {\r\n    let seconds = Math.floor((new Date() - date) / 1000);\r\n\r\n    let interval = seconds / 31536000;\r\n    if (interval > 1) {\r\n      const flr = Math.floor(interval);\r\n      return Math.floor(interval) + (flr === 1 ? \" year\" : \" years\");\r\n    }\r\n\r\n    interval = seconds / 2592000;\r\n    if (interval > 1) {\r\n      const flr = Math.floor(interval);\r\n      return flr + (flr === 1 ? \" month\" : \" months\");\r\n    }\r\n\r\n    interval = seconds / 86400;\r\n    if (interval > 1) {\r\n      const flr = Math.floor(interval);\r\n      return Math.floor(flr) + (flr === 1 ? \" day\" : \" days\");\r\n    }\r\n\r\n    interval = seconds / 3600;\r\n    if (interval > 1) {\r\n      const flr = Math.floor(interval);\r\n      return flr + (flr === 1 ? \" hour\" : \" hours\");\r\n    }\r\n\r\n    interval = seconds / 60;\r\n    if (interval > 1) {\r\n      const flr = Math.floor(interval);\r\n      return flr + (flr == 1 ? \" minute\" : \" minutes\");\r\n    }\r\n    return \"Seconds\";\r\n  };\r\n\r\n  const like = () => {\r\n    likePost({ variables: { post_id: id } })\r\n      .catch((error) => console.log(error))\r\n      .then(({ data: { likePost } }) => {\r\n        setState({\r\n          ...state,\r\n          liked: !state.liked,\r\n          likes: likePost.post.likers.length,\r\n        });\r\n      });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"post card\">\r\n        <div className=\"post-top card-top\">\r\n          <div className=\"post-info-top\">\r\n            <Link to={`user/${user_id}`} className=\"post-user\">\r\n              {\" \"}\r\n              {username}{\" \"}\r\n            </Link>\r\n            <small className=\"post-time\">\r\n              {timeSince(new Date(creation))} ago{\" \"}\r\n            </small>\r\n          </div>\r\n          <h5 className=\"post-title\">{title}</h5>\r\n        </div>\r\n        <animated.pre\r\n          ref={self}\r\n          className={`post-text`}\r\n          style={state.hasMore ? expandText : {}}\r\n        >\r\n          {text}\r\n          {state.hasMore && (\r\n            <button\r\n              className=\"more\"\r\n              onClick={() => {\r\n                setState({ ...state, expand: !state.expand });\r\n              }}\r\n            >\r\n              {state.expand ? \"less\" : \"more\"}\r\n            </button>\r\n          )}\r\n        </animated.pre>\r\n        {!state.loading && (\r\n          <div className=\"info-bottom\">\r\n            <span\r\n              className=\"like\"\r\n              onClick={() => {\r\n                like();\r\n              }}\r\n              onMouseOver={() => setHovered(true)}\r\n              onMouseOut={() => setHovered(false)}\r\n            >\r\n              {!hovered ? (\r\n                state.liked ? (\r\n                  <Liked className=\"like-icon\" />\r\n                ) : (\r\n                  <Heart className=\"like-icon\" />\r\n                )\r\n              ) : !state.liked ? (\r\n                <Liked className=\"like-icon\" />\r\n              ) : (\r\n                <Heart className=\"like-icon\" />\r\n              )}\r\n              {state.likes > 0 && state.likes}\r\n            </span>\r\n            <span className=\"like\">\r\n              <Link to={`/post/${id}`} className=\"like-icon\">\r\n                <Comments />\r\n              </Link>\r\n              {state.comments > 0 && state.comments}\r\n            </span>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PostItem;\r\n"],"sourceRoot":""}