(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"./src/components/post/PostItem.js":
/*!*****************************************!*\
  !*** ./src/components/post/PostItem.js ***!
  \*****************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t);var r=n(/*! @babel/runtime/helpers/defineProperty */"./node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(r),a=n(/*! @babel/runtime/helpers/slicedToArray */"./node_modules/@babel/runtime/helpers/slicedToArray.js"),s=n.n(a),c=n(/*! react */"./node_modules/react/index.js"),l=n.n(c),i=n(/*! @apollo/client */"./node_modules/@apollo/client/index.js"),u=n(/*! ../../Queries */"./src/Queries.js"),m=n(/*! react-router-dom */"./node_modules/react-router-dom/esm/react-router-dom.js"),p=n(/*! react-spring */"./node_modules/react-spring/web.js");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=Object(c.lazy)((function(){return n.e(/*! import() */10).then(n.bind(null,/*! ../SVG/Heart */"./src/components/SVG/Heart.js"))})),b=Object(c.lazy)((function(){return n.e(/*! import() */12).then(n.bind(null,/*! ../SVG/Comments */"./src/components/SVG/Comments.js"))}));t.default=function(e){var t=e.text,n=e.title,r=e.username,o=e.id,a=e.likes,d=e.creation,j=e.user_id,k={done:!1,likes:a,hasMore:!1,height:"32vh",loading:!1,comments:e.comments},O=Object(i.useLazyQuery)(u.LIKED,{variables:{post_id:o},onCompleted:function(e){S(f(f({},_),{},{liked:e.liked}))}}),g=s()(O,1)[0],v=Object(c.useState)(!1),y=s()(v,2),E=y[0],x=y[1],w=Object(c.useRef)(null),M=Object(i.useMutation)(u.LIKE),N=s()(M,1)[0],P=Object(c.useState)(k),H=s()(P,2),_=H[0],S=H[1],D=Object(p.useSpring)({to:{maxHeight:_.expand?"".concat(w.current.scrollHeight,"px"):"230px",height:_.expand?"".concat(w.current.scrollHeight,"px"):"230px"},from:{maxHeight:_.expand?"".concat(w.current.scrollHeight,"px"):"230px",height:_.expand?"".concat(w.current.scrollHeight,"px"):"230px"},duration:"1s"});Object(c.useEffect)((function(){g(),S(f(f({},_),{},{hasMore:w.current.scrollHeight>w.current.clientHeight,loading:!1}))}),[]);return l.a.createElement("div",{className:"post card"},l.a.createElement("div",{className:"post-top card-top"},l.a.createElement("div",{className:"post-info-top"},l.a.createElement(m.Link,{to:"user/".concat(j),className:"post-user"}," ",r," "),l.a.createElement("small",{className:"post-time"},function(e){var t=Math.floor((new Date-e)/1e3),n=t/31536e3;if(n>1){var r=Math.floor(n);return Math.floor(n)+(1===r?" year":" years")}if((n=t/2592e3)>1){var o=Math.floor(n);return o+(1===o?" month":" months")}if((n=t/86400)>1){var a=Math.floor(n);return Math.floor(a)+(1===a?" day":" days")}if((n=t/3600)>1){var s=Math.floor(n);return s+(1===s?" hour":" hours")}if((n=t/60)>1){var c=Math.floor(n);return c+(1==c?" minute":" minutes")}return"Seconds"}(new Date(d))," ago"," ")),l.a.createElement("h5",{className:"post-title"},n)),l.a.createElement(p.animated.pre,{ref:w,className:"post-text",style:_.hasMore?D:{}},t,_.hasMore&&l.a.createElement("button",{className:"more",onClick:function(){S(f(f({},_),{},{expand:!_.expand}))}},_.expand?"less":"more")),!_.loading&&l.a.createElement("div",{className:"info-bottom"},l.a.createElement("span",{className:"like",onClick:function(){N({variables:{post_id:o}}).catch((function(e){return console.log(e)})).then((function(e){var t=e.data.likePost;S(f(f({},_),{},{liked:!_.liked,likes:t.post.likers.length}))}))},onMouseOver:function(){return x(!0)},onMouseOut:function(){return x(!1)}},E?_.liked?l.a.createElement(h,{className:"like-icon"}):l.a.createElement(Liked,{className:"like-icon"}):_.liked?l.a.createElement(Liked,{className:"like-icon"}):l.a.createElement(h,{className:"like-icon"}),_.likes>0&&_.likes),l.a.createElement("span",{className:"like"},l.a.createElement(m.Link,{to:"/post/".concat(o)},l.a.createElement(b,null)),_.comments>0&&_.comments)))}}}]);
//# sourceMappingURL=1.main.js.map