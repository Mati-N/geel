(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"./src/components/post/PostItem.js":
/*!*****************************************!*\
  !*** ./src/components/post/PostItem.js ***!
  \*****************************************/
/*! exports provided: default */function(e,t,a){"use strict";a.r(t);var n=a(/*! @babel/runtime/helpers/defineProperty */"./node_modules/@babel/runtime/helpers/defineProperty.js"),r=a.n(n),o=a(/*! @babel/runtime/helpers/slicedToArray */"./node_modules/@babel/runtime/helpers/slicedToArray.js"),c=a.n(o),s=a(/*! react */"./node_modules/react/index.js"),l=a.n(s),i=a(/*! @apollo/client */"./node_modules/@apollo/client/index.js"),m=a(/*! ../../Queries */"./src/Queries.js"),u=a(/*! react-router-dom */"./node_modules/react-router-dom/esm/react-router-dom.js"),p=a(/*! react-spring */"./node_modules/react-spring/web.js");function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){r()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h=Object(s.lazy)((function(){return a.e(/*! import() */10).then(a.bind(null,/*! ../SVG/Heart */"./src/components/SVG/Heart.js"))}));t.default=function(e){var t=e.text,a=e.title,n=e.username,r=e.id,o=e.likes,d=e.creation,b=e.user_id,g={done:!1,likes:o,hasMore:!1,height:"32vh",loading:!1,comments:e.comments},k=Object(i.useLazyQuery)(m.LIKED,{variables:{post_id:r},onCompleted:function(e){L(f(f({},P),{},{liked:e.liked}))}}),j=c()(k,1)[0],O=Object(s.useState)(!1),E=c()(O,2),v=E[0],x=E[1],y=Object(s.useRef)(null),w=Object(i.useMutation)(m.LIKE),N=c()(w,1)[0],H=Object(s.useState)(g),M=c()(H,2),P=M[0],L=M[1],_=Object(p.useSpring)({to:{maxHeight:P.expand?"".concat(y.current.scrollHeight,"px"):"230px",height:P.expand?"".concat(y.current.scrollHeight,"px"):"230px"},from:{maxHeight:P.expand?"".concat(y.current.scrollHeight,"px"):"230px",height:P.expand?"".concat(y.current.scrollHeight,"px"):"230px"},duration:"1s"});Object(s.useEffect)((function(){j(),L(f(f({},P),{},{hasMore:y.current.scrollHeight>y.current.clientHeight,loading:!1}))}),[]);return l.a.createElement("div",{className:"post card"},l.a.createElement("div",{className:"post-top card-top"},l.a.createElement("div",{className:"post-info-top"},l.a.createElement(u.Link,{to:"user/".concat(b),className:"post-user"}," ",n," "),l.a.createElement("small",{className:"post-time"},function(e){var t=Math.floor((new Date-e)/1e3),a=t/31536e3;if(a>1){var n=Math.floor(a);return Math.floor(a)+(1===n?" year":" years")}if((a=t/2592e3)>1){var r=Math.floor(a);return r+(1===r?" month":" months")}if((a=t/86400)>1){var o=Math.floor(a);return Math.floor(o)+(1===o?" day":" days")}if((a=t/3600)>1){var c=Math.floor(a);return c+(1===c?" hour":" hours")}if((a=t/60)>1){var s=Math.floor(a);return s+(1==s?" minute":" minutes")}return"Seconds"}(new Date(d))," ago"," ")),l.a.createElement("h5",{className:"post-title"},a)),l.a.createElement(p.animated.pre,{ref:y,className:"post-text",style:P.hasMore?_:{}},t,P.hasMore&&l.a.createElement("button",{className:"more",onClick:function(){L(f(f({},P),{},{expand:!P.expand}))}},P.expand?"less":"more")),!P.loading&&l.a.createElement("div",{className:"info-bottom"},l.a.createElement("span",{className:"like",onClick:function(){N({variables:{post_id:r}}).catch((function(e){return console.log(e)})).then((function(e){var t=e.data.likePost;L(f(f({},P),{},{liked:!P.liked,likes:t.post.likers.length}))}))},onMouseOver:function(){return x(!0)},onMouseOut:function(){return x(!1)}},v?P.liked?l.a.createElement(h,{className:"like-icon"}):l.a.createElement(Liked,{className:"like-icon"}):P.liked?l.a.createElement(Liked,{className:"like-icon"}):l.a.createElement(h,{className:"like-icon"}),P.likes>0&&P.likes),l.a.createElement("span",{className:"like"},l.a.createElement(u.Link,{to:"/post/".concat(r)},l.a.createElement("svg",{id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 128 128",className:"like-icon"},l.a.createElement("path",{className:"cls-1",fill:"#3b4551",d:"M112.97335,11.06168H15.02665c-7.454,0-13.99239,6.9757-13.99239,14.92612V84.28942c0,7.44484,6.01577,13.05865,13.99239,13.05865H61.35251l17.98582,18.20331a4.66276,4.66276,0,0,0,6.63636,0l17.987-18.20331h9.0117c7.97776,0,13.99239-5.61381,13.99239-13.05865V25.9878C126.96574,18.03738,120.42731,11.06168,112.97335,11.06168Zm4.66413,73.22773c0,2.75338-2.512,3.73039-4.66413,3.73039H102.0122A4.663,4.663,0,0,0,98.694,89.40675l-16.0375,16.23108L66.619,89.40675a4.66108,4.66108,0,0,0-3.31818-1.38694H15.02665c-2.15215,0-4.66413-.977-4.66413-3.73039V25.9878c0-2.77388,2.3537-5.59787,4.66413-5.59787h97.94671c2.30929,0,4.66413,2.824,4.66413,5.59787Z"}),l.a.createElement("path",{className:"cls-2",fill:"#2b77c0",d:"M89.65271,33.76515H38.34729a3.4981,3.4981,0,1,0,0,6.99619H89.65271a3.4981,3.4981,0,1,0,0-6.99619Z"}),l.a.createElement("path",{className:"cls-2",fill:"#2b77c0",d:"M89.65271,50.70678H38.34729a3.4981,3.4981,0,1,0,0,6.99619H89.65271a3.4981,3.4981,0,1,0,0-6.99619Z"}),l.a.createElement("path",{className:"cls-2",fill:"#2b77c0",d:"M89.65271,67.64841H38.34729a3.4981,3.4981,0,1,0,0,6.99619H89.65271a3.4981,3.4981,0,1,0,0-6.99619Z"}))),P.comments>0&&P.comments)))}}}]);
//# sourceMappingURL=1.main.js.map