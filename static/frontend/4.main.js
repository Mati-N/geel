(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"./src/components/pages/Home.js":
/*!**************************************!*\
  !*** ./src/components/pages/Home.js ***!
  \**************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t);var r=n(/*! @babel/runtime/helpers/extends */"./node_modules/@babel/runtime/helpers/extends.js"),a=n.n(r),s=n(/*! @babel/runtime/helpers/toConsumableArray */"./node_modules/@babel/runtime/helpers/toConsumableArray.js"),o=n.n(s),l=n(/*! @babel/runtime/helpers/slicedToArray */"./node_modules/@babel/runtime/helpers/slicedToArray.js"),c=n.n(l),i=n(/*! react */"./node_modules/react/index.js"),u=n.n(i),m=n(/*! ../../Queries */"./src/Queries.js"),d=n(/*! @apollo/client */"./node_modules/@apollo/client/index.js"),p=n(/*! react-waypoint */"./node_modules/react-waypoint/es/index.js"),f=n(/*! react-spinners-kit */"./node_modules/react-spinners-kit/lib/index.js"),h=n(/*! ./Offline */"./src/components/pages/Offline.js"),b=n(/*! ../post/PostItem */"./src/components/post/PostItem.js");t.default=function(){var e=Object(d.useQuery)(m.GET_POSTS),t=e.loading,n=e.data,r=e.error,s=e.fetchMore,l=e.refetch,g=Object(i.useState)(!0),j=c()(g,2),E=j[0],v=j[1];return t?u.a.createElement("div",{className:"spinner"},u.a.createElement(f.ImpulseSpinner,{size:50,style:{margin:"auto"}})):r?u.a.createElement(u.a.Fragment,null,u.a.createElement(h.default,null),u.a.createElement("button",{className:"btn btn-teal",onClick:l},"Refresh")):u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"main"},n.posts.edges.map((function(e){var t=e.node;return u.a.createElement(b.default,a()({key:t.id},t,{likes:t.likers.length,comments:t.commentSet.length,user_id:t.user.id,username:t.user.username}))})),u.a.createElement(p.Waypoint,{onEnter:function(){s({query:m.GET_POSTS,variables:{cursor:n.posts.pageInfo.endCursor},updateQuery:function(e,t){var n=t.fetchMoreResult;if(v(!0),!e.posts.pageInfo.hasNextPage)return v(!1),e;var r=n.posts.edges,a=n.posts.pageInfo;return r.length?{posts:{__typename:e.posts.__typename,edges:[].concat(o()(e.posts.edges),o()(r)),pageInfo:a}}:e}})}},u.a.createElement("div",{className:"spinner"},E&&u.a.createElement(f.ImpulseSpinner,{size:40})))))}},"./src/components/pages/Offline.js":
/*!*****************************************!*\
  !*** ./src/components/pages/Offline.js ***!
  \*****************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t);var r=n(/*! react */"./node_modules/react/index.js"),a=n.n(r);t.default=function(){return a.a.createElement("div",null,a.a.createElement("h1",null,"It seems like you are offline"),a.a.createElement("small",null,"Try refreshing"))}},"./src/components/post/PostItem.js":
/*!*****************************************!*\
  !*** ./src/components/post/PostItem.js ***!
  \*****************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t);var r=n(/*! @babel/runtime/helpers/defineProperty */"./node_modules/@babel/runtime/helpers/defineProperty.js"),a=n.n(r),s=n(/*! @babel/runtime/helpers/slicedToArray */"./node_modules/@babel/runtime/helpers/slicedToArray.js"),o=n.n(s),l=n(/*! react */"./node_modules/react/index.js"),c=n.n(l),i=n(/*! @apollo/client */"./node_modules/@apollo/client/index.js"),u=n(/*! ../../Queries */"./src/Queries.js"),m=n(/*! react-router-dom */"./node_modules/react-router-dom/esm/react-router-dom.js"),d=n(/*! react-spring */"./node_modules/react-spring/web.js");function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=Object(l.lazy)((function(){return n.e(/*! import() */7).then(n.bind(null,/*! ../SVG/Like.svg */"./src/components/SVG/Like.svg"))})),b=Object(l.lazy)((function(){return n.e(/*! import() */6).then(n.bind(null,/*! ../SVG/Heart.svg */"./src/components/SVG/Heart.svg"))})),g=Object(l.lazy)((function(){return n.e(/*! import() */5).then(n.bind(null,/*! ../SVG/Comments.svg */"./src/components/SVG/Comments.svg"))}));t.default=function(e){var t=e.text,n=e.title,r=e.username,a=e.id,s=e.likes,p=e.creation,j=e.user_id,E={done:!1,likes:s,hasMore:!1,height:"32vh",loading:!1,comments:e.comments},v=Object(i.useLazyQuery)(u.LIKED,{variables:{post_id:a},onCompleted:function(e){H(f(f({},I),{},{liked:e.liked}))}}),y=o()(v,1)[0],O=Object(l.useState)(!1),k=o()(O,2),x=k[0],_=k[1],N=Object(l.useRef)(null),M=Object(i.useMutation)(u.LIKE),S=o()(M,1)[0],w=Object(l.useState)(E),P=o()(w,2),I=P[0],H=P[1],C=Object(d.useSpring)({to:{maxHeight:I.expand?"".concat(N.current.scrollHeight,"px"):"230px",height:I.expand?"".concat(N.current.scrollHeight,"px"):"230px"},from:{maxHeight:I.expand?"".concat(N.current.scrollHeight,"px"):"230px",height:I.expand?"".concat(N.current.scrollHeight,"px"):"230px"},duration:"1s"});Object(l.useEffect)((function(){y(),H(f(f({},I),{},{hasMore:N.current.scrollHeight>N.current.clientHeight,loading:!1}))}),[]);return c.a.createElement("div",{className:"post card"},c.a.createElement("div",{className:"post-top card-top"},c.a.createElement("div",{className:"post-info-top"},c.a.createElement(m.Link,{to:"user/".concat(j),className:"post-user"}," ",r," "),c.a.createElement("small",{className:"post-time"},function(e){var t=Math.floor((new Date-e)/1e3),n=t/31536e3;if(n>1){var r=Math.floor(n);return Math.floor(n)+(1===r?" year":" years")}if((n=t/2592e3)>1){var a=Math.floor(n);return a+(1===a?" month":" months")}if((n=t/86400)>1){var s=Math.floor(n);return Math.floor(s)+(1===s?" day":" days")}if((n=t/3600)>1){var o=Math.floor(n);return o+(1===o?" hour":" hours")}if((n=t/60)>1){var l=Math.floor(n);return l+(1==l?" minute":" minutes")}return"Seconds"}(new Date(p))," ago"," ")),c.a.createElement("h5",{className:"post-title"},n)),c.a.createElement(d.animated.pre,{ref:N,className:"post-text",style:I.hasMore?C:{}},t,I.hasMore&&c.a.createElement("button",{className:"more",onClick:function(){H(f(f({},I),{},{expand:!I.expand}))}},I.expand?"less":"more")),!I.loading&&c.a.createElement("div",{className:"info-bottom"},c.a.createElement("span",{className:"like",onClick:function(){S({variables:{post_id:a}}).catch((function(e){return console.log(e)})).then((function(e){var t=e.data.likePost;H(f(f({},I),{},{liked:!I.liked,likes:t.post.likers.length}))}))},onMouseOver:function(){return _(!0)},onMouseOut:function(){return _(!1)}},x?I.liked?c.a.createElement(b,{className:"like-icon"}):c.a.createElement(h,{className:"like-icon"}):I.liked?c.a.createElement(h,{className:"like-icon"}):c.a.createElement(b,{className:"like-icon"}),I.likes>0&&I.likes),c.a.createElement("span",{className:"like"},c.a.createElement(m.Link,{to:"/post/".concat(a),className:"like-icon"},c.a.createElement(g,null)),I.comments>0&&I.comments)))}}}]);
//# sourceMappingURL=4.main.js.map