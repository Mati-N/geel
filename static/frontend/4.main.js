(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"./src/components/pages/Post.js":
/*!**************************************!*\
  !*** ./src/components/pages/Post.js ***!
  \**************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t);var r=n(/*! @babel/runtime/helpers/extends */"./node_modules/@babel/runtime/helpers/extends.js"),o=n.n(r),s=(n(/*! @babel/runtime/helpers/toConsumableArray */"./node_modules/@babel/runtime/helpers/toConsumableArray.js"),n(/*! @babel/runtime/helpers/slicedToArray */"./node_modules/@babel/runtime/helpers/slicedToArray.js")),a=n.n(s),c=n(/*! react */"./node_modules/react/index.js"),l=n.n(c),i=n(/*! ../post/PostItem */"./src/components/post/PostItem.js"),u=(n(/*! react-waypoint */"./node_modules/react-waypoint/es/index.js"),n(/*! @apollo/client */"./node_modules/@apollo/client/index.js")),m=n(/*! ../../Queries */"./src/Queries.js"),d=n(/*! react-spinners-kit */"./node_modules/react-spinners-kit/lib/index.js");t.default=function(e){var t=e.match.params.id,n=Object(u.useQuery)(m.GET_COMMENTS,{variables:{id:t}}),r=n.loading,s=(n.data,n.error,n.fetchMore,n.refetch,readQuery({query:m.GET_POSTS,variables:{id:t}}).post);console.log(s);var p=Object(c.useState)(!0),f=a()(p,2),h=f[0];f[1];return l.a.createElement("div",{className:"main"},l.a.createElement(i.default,o()({key:s.id},s,{likes:s.likers.length,comments:s.commentSet.length,user_id:s.user.id,username:s.user.username})),(r||h)&&l.a.createElement(d.ImpulseSpinner,null))}},"./src/components/post/PostItem.js":
/*!*****************************************!*\
  !*** ./src/components/post/PostItem.js ***!
  \*****************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t);var r=n(/*! @babel/runtime/helpers/defineProperty */"./node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(r),s=n(/*! @babel/runtime/helpers/slicedToArray */"./node_modules/@babel/runtime/helpers/slicedToArray.js"),a=n.n(s),c=n(/*! react */"./node_modules/react/index.js"),l=n.n(c),i=n(/*! @apollo/client */"./node_modules/@apollo/client/index.js"),u=n(/*! ../../Queries */"./src/Queries.js"),m=n(/*! react-router-dom */"./node_modules/react-router-dom/esm/react-router-dom.js"),d=n(/*! react-spring */"./node_modules/react-spring/web.js");function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=Object(c.lazy)((function(){return n.e(/*! import() */7).then(n.bind(null,/*! ../SVG/Like.svg */"./src/components/SVG/Like.svg"))})),b=Object(c.lazy)((function(){return n.e(/*! import() */6).then(n.bind(null,/*! ../SVG/Heart.svg */"./src/components/SVG/Heart.svg"))})),j=Object(c.lazy)((function(){return n.e(/*! import() */5).then(n.bind(null,/*! ../SVG/Comments.svg */"./src/components/SVG/Comments.svg"))}));t.default=function(e){var t=e.text,n=e.title,r=e.username,o=e.id,s=e.likes,p=e.creation,g=e.user_id,O={done:!1,likes:s,hasMore:!1,height:"32vh",loading:!1,comments:e.comments},k=Object(i.useLazyQuery)(u.LIKED,{variables:{post_id:o},onCompleted:function(e){D(f(f({},H),{},{liked:e.liked}))}}),v=a()(k,1)[0],y=Object(c.useState)(!1),E=a()(y,2),x=E[0],_=E[1],M=Object(c.useRef)(null),N=Object(i.useMutation)(u.LIKE),w=a()(N,1)[0],S=Object(c.useState)(O),P=a()(S,2),H=P[0],D=P[1],C=Object(d.useSpring)({to:{maxHeight:H.expand?"".concat(M.current.scrollHeight,"px"):"230px",height:H.expand?"".concat(M.current.scrollHeight,"px"):"230px"},from:{maxHeight:H.expand?"".concat(M.current.scrollHeight,"px"):"230px",height:H.expand?"".concat(M.current.scrollHeight,"px"):"230px"},duration:"1s"});Object(c.useEffect)((function(){v(),D(f(f({},H),{},{hasMore:M.current.scrollHeight>M.current.clientHeight,loading:!1}))}),[]);return l.a.createElement("div",{className:"post card"},l.a.createElement("div",{className:"post-top card-top"},l.a.createElement("div",{className:"post-info-top"},l.a.createElement(m.Link,{to:"user/".concat(g),className:"post-user"}," ",r," "),l.a.createElement("small",{className:"post-time"},function(e){var t=Math.floor((new Date-e)/1e3),n=t/31536e3;if(n>1){var r=Math.floor(n);return Math.floor(n)+(1===r?" year":" years")}if((n=t/2592e3)>1){var o=Math.floor(n);return o+(1===o?" month":" months")}if((n=t/86400)>1){var s=Math.floor(n);return Math.floor(s)+(1===s?" day":" days")}if((n=t/3600)>1){var a=Math.floor(n);return a+(1===a?" hour":" hours")}if((n=t/60)>1){var c=Math.floor(n);return c+(1==c?" minute":" minutes")}return"Seconds"}(new Date(p))," ago"," ")),l.a.createElement("h5",{className:"post-title"},n)),l.a.createElement(d.animated.pre,{ref:M,className:"post-text",style:H.hasMore?C:{}},t,H.hasMore&&l.a.createElement("button",{className:"more",onClick:function(){D(f(f({},H),{},{expand:!H.expand}))}},H.expand?"less":"more")),!H.loading&&l.a.createElement("div",{className:"info-bottom"},l.a.createElement("span",{className:"like",onClick:function(){w({variables:{post_id:o}}).catch((function(e){return console.log(e)})).then((function(e){var t=e.data.likePost;D(f(f({},H),{},{liked:!H.liked,likes:t.post.likers.length}))}))},onMouseOver:function(){return _(!0)},onMouseOut:function(){return _(!1)}},x?H.liked?l.a.createElement(b,{className:"like-icon"}):l.a.createElement(h,{className:"like-icon"}):H.liked?l.a.createElement(h,{className:"like-icon"}):l.a.createElement(b,{className:"like-icon"}),H.likes>0&&H.likes),l.a.createElement("span",{className:"like"},l.a.createElement(m.Link,{to:"/post/".concat(o),className:"like-icon"},l.a.createElement(j,null)),H.comments>0&&H.comments)))}}}]);
//# sourceMappingURL=4.main.js.map