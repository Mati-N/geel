{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/interopRequireDefault.js","webpack:///./node_modules/@material-ui/icons/Close.js","webpack:///./node_modules/@material-ui/icons/PhotoCamera.js","webpack:///./node_modules/@material-ui/icons/utils/createSvgIcon.js","webpack:///./src/components/pages/Edit.js"],"names":["module","exports","obj","__esModule","_interopRequireDefault","Object","defineProperty","value","default","_react","_default","createElement","d","Fragment","cx","cy","r","path","displayName","Component","memo","forwardRef","props","ref","_SvgIcon","_extends2","concat","muiName","useStyles","makeStyles","theme","form","marginTop","spacing","width","margin","breakpoints","up","formField","padding","formControl","formLabel","fontSize","submit","input","display","button","marginBottom","imageButtons","alignItems","gap","justifyContent","Edit","setAlert","useSetRecoilState","alertAtom","removeAlert","useResetRecoilState","updateUser","useMutation","UPDATE_USER","useState","imageUrl","setImageUrl","classes","history","useHistory","useEffect","initialValues","username","newPassword","password","image","validationSchema","Yup","max","min","required","matches","onSubmit","values","setSubmitting","variables","length","update","cache","data","ok","writeFragment","id","user","fragment","gql","imagePath","then","message","type","push","isSubmitting","isValid","dirty","setFieldValue","alt","className","src","fullWidth","accept","onChange","e","reader","FileReader","file","target","files","onloadend","result","readAsDataURL","htmlFor","variant","color","startIcon","component","onClick","preventDefault","name","as","TextField","label","FormHelperText","error","disabled"],"mappings":"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","file":"16.main.js","sourcesContent":["function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nmodule.exports = _interopRequireDefault;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"path\", {\n  d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n}), 'Close');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(_react.default.Fragment, null, _react.default.createElement(\"circle\", {\n  cx: \"12\",\n  cy: \"12\",\n  r: \"3.2\"\n}), _react.default.createElement(\"path\", {\n  d: \"M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z\"\n})), 'PhotoCamera');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = createSvgIcon;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _SvgIcon = _interopRequireDefault(require(\"@material-ui/core/SvgIcon\"));\n\nfunction createSvgIcon(path, displayName) {\n  var Component = _react.default.memo(_react.default.forwardRef(function (props, ref) {\n    return _react.default.createElement(_SvgIcon.default, (0, _extends2.default)({\n      ref: ref\n    }, props), path);\n  }));\n\n  if (process.env.NODE_ENV !== 'production') {\n    Component.displayName = \"\".concat(displayName, \"Icon\");\n  }\n\n  Component.muiName = _SvgIcon.default.muiName;\n  return Component;\n}","import React, { useState, useContext, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { UPDATE_USER } from \"../../Queries\";\r\nimport { useSetRecoilState, useResetRecoilState } from \"recoil\";\r\nimport { alertAtom } from \"../../atoms\";\r\nimport { Formik, Field, ErrorMessage, Form } from \"formik\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport {\r\n  TextField,\r\n  FormControl,\r\n  makeStyles,\r\n  FormHelperText,\r\n} from \"@material-ui/core\";\r\nimport PhotoCamera from \"@material-ui/icons/PhotoCamera\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport * as Yup from \"yup\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  form: {\r\n    marginTop: theme.spacing(4),\r\n    width: \"80%\", // Fix IE 11 issue.\r\n    margin: \"auto\",\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      width: \"90%\",\r\n    },\r\n  },\r\n  formField: {\r\n    padding: \"0.2em\",\r\n  },\r\n  formControl: {\r\n    margin: \"0.1em\",\r\n    padding: \"0.1em\",\r\n  },\r\n  formLabel: {\r\n    margin: \"auto\",\r\n    width: \"auto\",\r\n    fontSize: \"2.5em\",\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n\r\n  input: {\r\n    display: \"none\",\r\n  },\r\n  button: {\r\n    padding: theme.spacing(1),\r\n    marginBottom: theme.spacing(1),\r\n  },\r\n  imageButtons: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    gap: \"15px\",\r\n    justifyContent: \"space-evenly\",\r\n  },\r\n}));\r\n\r\nconst Edit = () => {\r\n  const setAlert = useSetRecoilState(alertAtom);\r\n  const removeAlert = useResetRecoilState(alertAtom);\r\n  const [updateUser] = useMutation(UPDATE_USER);\r\n  const [imageUrl, setImageUrl] = useState(null);\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  useEffect(() => {\r\n    removeAlert();\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <Formik\r\n        initialValues={{\r\n          username: \"\",\r\n          newPassword: \"\",\r\n          password: \"\",\r\n          image: null,\r\n        }}\r\n        validationSchema={Yup.object({\r\n          username: Yup.string().max(30, \"Must be 30 characters or less\"),\r\n          password: Yup.string()\r\n            .min(8, \"Must be 8 characters or more\")\r\n            .required(\"Required\"),\r\n          newPassword: Yup.string()\r\n            .min(8, \"Must be 8 characters or more\")\r\n            .matches(\r\n              /^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*#?&])[A-Za-z\\d@$!%*#?&]{8,}$/,\r\n              \"Must Contain 8 Characters, One Uppercase, One Lowercase, One Number and one special case Character\"\r\n            ),\r\n        })}\r\n        onSubmit={(values, { setSubmitting }) => {\r\n          if (\r\n            values.username == null &&\r\n            image == null &&\r\n            values.newPassword == null\r\n          ) {\r\n            return;\r\n          }\r\n          setSubmitting(true);\r\n          updateUser({\r\n            variables: {\r\n              password: values.password,\r\n              username: values.username.length > 0 ? values.username : null,\r\n              newPassword:\r\n                values.newPassword.length > 0 ? values.newPassword : null,\r\n              image: values.image,\r\n            },\r\n            update: (cache, { data }) => {\r\n              if (cache && data.ok) {\r\n                cache.writeFragment({\r\n                  id: `UserNode:${data.updateUser.user.id}`,\r\n                  fragment: gql`\r\n                    fragment User on UserNode {\r\n                      username\r\n                      imagePath\r\n                    }\r\n                  `,\r\n                  data: {\r\n                    username: data.updateUser.user.username,\r\n                    imagePath: data.updateUser.user.imagePath,\r\n                  },\r\n                });\r\n              }\r\n            },\r\n          }).then((d) => {\r\n            if (d) {\r\n              if (!d.data.updateUser.ok) {\r\n                setAlert({\r\n                  message: d.data.updateUser.message,\r\n                  type: \"warning\",\r\n                });\r\n              } else {\r\n                setAlert({\r\n                  message: d.data.updateUser.message,\r\n                  type: \"warning\",\r\n                });\r\n\r\n                history.push(\"/\");\r\n              }\r\n            }\r\n          });\r\n          setSubmitting(false);\r\n        }}\r\n      >\r\n        {({ isSubmitting, isValid, dirty, setFieldValue }) => (\r\n          <>\r\n            {imageUrl && (\r\n              <img\r\n                alt=\"profile picture\"\r\n                className=\"mx-auto d-block w-25 h-25\"\r\n                src={imageUrl}\r\n              />\r\n            )}\r\n            <Form className={classes.form}>\r\n              <p className={classes.formLabel}>Edit Account</p>\r\n\r\n              <FormControl className={classes.formControl} fullWidth>\r\n                <input\r\n                  accept=\"image/*\"\r\n                  className={classes.input}\r\n                  id=\"icon-button-file\"\r\n                  type=\"file\"\r\n                  onChange={(e) => {\r\n                    let reader = new FileReader();\r\n                    let file = e.target.files[0];\r\n                    reader.onloadend = () => {\r\n                      setFieldValue(\"image\", file);\r\n                      setImageUrl(reader.result);\r\n                    };\r\n                    reader.readAsDataURL(file);\r\n                  }}\r\n                />\r\n                <label\r\n                  htmlFor=\"icon-button-file\"\r\n                  className={classes.imageButtons}\r\n                >\r\n                  <Button\r\n                    variant=\"contained\"\r\n                    color=\"secondary\"\r\n                    className={classes.button}\r\n                    startIcon={<PhotoCamera />}\r\n                    component=\"span\"\r\n                  >\r\n                    Profile Pic\r\n                  </Button>\r\n                  {imageUrl && (\r\n                    <Button\r\n                      variant=\"outlined\"\r\n                      color=\"secondary\"\r\n                      className={classes.button}\r\n                      startIcon={<CloseIcon />}\r\n                      component=\"span\"\r\n                      onClick={(e) => {\r\n                        e.preventDefault();\r\n                        setImageUrl(null);\r\n                        setFieldValue(\"image\", null);\r\n                      }}\r\n                    >\r\n                      Unload Picture\r\n                    </Button>\r\n                  )}\r\n                </label>\r\n              </FormControl>\r\n              <FormControl className={classes.formControl} fullWidth>\r\n                <Field\r\n                  type=\"text\"\r\n                  name=\"username\"\r\n                  as={TextField}\r\n                  label=\"Username\"\r\n                  className={classes.formField}\r\n                  fullWidth\r\n                />\r\n                <ErrorMessage\r\n                  name=\"username\"\r\n                  component={FormHelperText}\r\n                  error={true}\r\n                />\r\n              </FormControl>\r\n              <FormControl className={classes.formControl} fullWidth>\r\n                <Field\r\n                  type=\"password\"\r\n                  label=\"Password\"\r\n                  name=\"password\"\r\n                  as={TextField}\r\n                  fullWidth\r\n                  className={classes.formField}\r\n                />\r\n                <ErrorMessage\r\n                  name=\"password\"\r\n                  component={FormHelperText}\r\n                  error={true}\r\n                />\r\n              </FormControl>\r\n              <FormControl className={classes.formControl} fullWidth>\r\n                <Field\r\n                  type=\"password\"\r\n                  label=\"New Password\"\r\n                  name=\"newPassword\"\r\n                  as={TextField}\r\n                  fullWidth\r\n                  className={classes.formField}\r\n                />\r\n                <ErrorMessage\r\n                  name=\"newPassword\"\r\n                  component={FormHelperText}\r\n                  error={true}\r\n                />\r\n              </FormControl>\r\n              <FormControl className={classes.formControl} fullWidth>\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"btn btn-teal\"\r\n                  disabled={isSubmitting || !(isValid && dirty)}\r\n                >\r\n                  Change\r\n                </button>\r\n              </FormControl>\r\n            </Form>\r\n          </>\r\n        )}\r\n      </Formik>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Edit;\r\n"],"sourceRoot":""}