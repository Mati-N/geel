{"version":3,"sources":["webpack:///./src/components/pages/ChangeUsername.js"],"names":["CustomizeAccount","useState","password","newUsername","state","setState","disabled","setDisabled","doCustomize","useMutation","UPDATE_USER","useContext","AlertContext","setAlert","removeAlert","onChange","e","name","target","value","Verify","console","log","length","changed","to","className","method","onSubmit","preventDefault","variables","username","then","d","data","updateUser","ok","message","htmlFor","type","placeholder","id"],"mappings":";;;;uhEA+GeA,UAzGU,WAAM,QACHC,mBAAS,CACjCC,SAAU,GACVC,YAAa,KAHc,GACtBC,EADsB,KACfC,EADe,SAKGJ,oBAAS,GALZ,GAKtBK,EALsB,KAKZC,EALY,KAMtBC,EANsB,EAMPC,sBAAYC,eANL,QAOKC,qBAAWC,WAArCC,EAPqB,EAOrBA,SAAUC,EAPW,EAOXA,YACZC,EAAW,SAACC,GAChB,IAAMC,EAAOD,EAAEE,OAAOD,KACtBZ,EAAS,EAAD,KAAMD,GAAN,QAAcY,EAAEE,OAAOD,KAAOD,EAAEE,OAAOC,QAASC,EAAOH,KAG3DG,EAAS,SAACH,GAEd,OADAI,QAAQC,IAAIlB,EAAMD,YAAYoB,QACtBN,GACN,IAAK,WACCb,EAAMF,SAASqB,OAAS,GAC1BV,EAAS,qBAAsB,WAC/BN,GAAY,IAEgB,GAA5BH,EAAMD,YAAYoB,QAClBnB,EAAMF,SAASqB,QAAU,GAEzBT,IACAP,GAAY,IAEZO,IAEF,MACF,IAAK,cAC6B,GAA5BV,EAAMD,YAAYoB,QACpBV,EAAS,yBAA0B,WACnCN,GAAY,IAEZH,EAAMF,SAASqB,QAAU,GACG,GAA5BnB,EAAMD,YAAYoB,QAElBT,IACAP,GAAY,IAEZO,MAwBR,OAAIV,EAAMoB,QAAgB,kBAAC,WAAD,CAAUC,GAAG,MAGrC,0BAAMC,UAAU,YAAYC,OAAO,OAAOC,SArB3B,SAACZ,GAChBA,EAAEa,iBACoB,IAAlBzB,EAAMF,UACRM,EAAY,CACVsB,UAAW,CAAEC,SAAU3B,EAAMD,YAAaD,SAAUE,EAAMF,YACzD8B,MAAK,SAACC,GACHA,IACGA,EAAEC,KAAKC,WAAWC,IAGrB/B,EAAS,EAAD,KAAMD,GAAN,IAAaoB,SAAS,KAC9BX,EAAS,sBAAuB,YAHhCA,EAASoB,EAAEC,KAAKC,WAAWE,QAAS,gBAc1C,uBAAGX,UAAU,MAAb,mBACA,yBAAKA,UAAU,cACb,2BAAOA,UAAU,aAAaY,QAAQ,YAAtC,YAGA,2BACEC,KAAK,WACLb,UAAU,eACVT,KAAK,WACLF,SAAUA,EACVyB,YAAY,WACZrB,MAAOf,EAAMF,SACbuC,GAAG,cAGP,yBAAKf,UAAU,cACb,2BAAOA,UAAU,aAAaY,QAAQ,eAAtC,gBAGA,2BACEC,KAAK,OACLb,UAAU,eACVT,KAAK,cACLF,SAAUA,EACVyB,YAAY,eACZrB,MAAOf,EAAMD,YACbsC,GAAG,iBAGP,4BAAQF,KAAK,SAASb,UAAU,eAAepB,SAAUA,GAAzD","file":"17.main.js","sourcesContent":["import React, { useState, useContext } from \"react\";\r\nimport AlertContext from \"../../context/alert/AlertContext\";\r\nimport { UPDATE_USER } from \"../../Queries\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nconst CustomizeAccount = () => {\r\n  const [state, setState] = useState({\r\n    password: \"\",\r\n    newUsername: \"\",\r\n  });\r\n  const [disabled, setDisabled] = useState(true);\r\n  const [doCustomize] = useMutation(UPDATE_USER);\r\n  const { setAlert, removeAlert } = useContext(AlertContext);\r\n  const onChange = (e) => {\r\n    const name = e.target.name;\r\n    setState({ ...state, [e.target.name]: e.target.value }, Verify(name));\r\n  };\r\n\r\n  const Verify = (name) => {\r\n    console.log(state.newUsername.length);\r\n    switch (name) {\r\n      case \"password\":\r\n        if (state.password.length < 8) {\r\n          setAlert(\"Password too short\", \"warning\");\r\n          setDisabled(true);\r\n        } else if (\r\n          state.newUsername.length != 0 &&\r\n          state.password.length >= 8\r\n        ) {\r\n          removeAlert();\r\n          setDisabled(false);\r\n        } else {\r\n          removeAlert();\r\n        }\r\n        break;\r\n      case \"newUsername\":\r\n        if (state.newUsername.length == 0) {\r\n          setAlert(\"New Username too short\", \"warning\");\r\n          setDisabled(true);\r\n        } else if (\r\n          state.password.length >= 8 &&\r\n          state.newUsername.length != 0\r\n        ) {\r\n          removeAlert();\r\n          setDisabled(false);\r\n        } else {\r\n          removeAlert();\r\n        }\r\n        break;\r\n    }\r\n  };\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (state.password != \"\") {\r\n      doCustomize({\r\n        variables: { username: state.newUsername, password: state.password },\r\n      }).then((d) => {\r\n        if (d) {\r\n          if (!d.data.updateUser.ok) {\r\n            setAlert(d.data.updateUser.message, \"danger\");\r\n          } else {\r\n            setState({ ...state, changed: true });\r\n            setAlert(\"Username changed :}\", \"primary\");\r\n          }\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  if (state.changed) return <Redirect to=\"/\" />;\r\n\r\n  return (\r\n    <form className=\"form-auth\" method=\"post\" onSubmit={onSubmit}>\r\n      <p className=\"h2\">Change Username</p>\r\n      <div className=\"form-group\">\r\n        <label className=\"label-hide\" htmlFor=\"password\">\r\n          Password\r\n        </label>\r\n        <input\r\n          type=\"password\"\r\n          className=\"form-control\"\r\n          name=\"password\"\r\n          onChange={onChange}\r\n          placeholder=\"Password\"\r\n          value={state.password}\r\n          id=\"password\"\r\n        />\r\n      </div>\r\n      <div className=\"form-group\">\r\n        <label className=\"label-hide\" htmlFor=\"newPassword\">\r\n          New Username\r\n        </label>\r\n        <input\r\n          type=\"text\"\r\n          className=\"form-control\"\r\n          name=\"newUsername\"\r\n          onChange={onChange}\r\n          placeholder=\"New Username\"\r\n          value={state.newUsername}\r\n          id=\"newUsername\"\r\n        />\r\n      </div>\r\n      <button type=\"submit\" className=\"btn btn-teal\" disabled={disabled}>\r\n        Change\r\n      </button>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default CustomizeAccount;\r\n"],"sourceRoot":""}