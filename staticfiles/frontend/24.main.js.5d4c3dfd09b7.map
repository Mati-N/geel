{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/extends.js","webpack:///./node_modules/@babel/runtime/helpers/interopRequireDefault.js","webpack:///./node_modules/@material-ui/icons/MarkunreadMailboxTwoTone.js","webpack:///./node_modules/@material-ui/icons/utils/createSvgIcon.js","webpack:///./src/components/pages/Notifications.js"],"names":["_extends","module","exports","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","obj","__esModule","_interopRequireDefault","defineProperty","value","default","_react","_default","createElement","Fragment","d","opacity","path","displayName","Component","memo","forwardRef","props","ref","_SvgIcon","_extends2","concat","muiName","Offline","lazy","Notifications","useQuery","GET_NOTIFICATIONS","pollInterval","loading","data","error","fetchMore","refetch","readNotif","useMutation","READ_NOTIFICATION","useState","spin","setSpin","className","size","style","margin","onClick","variant","color","startIcon","selfNotification","edges","NoData","width","height","preserveAspectRatio","map","node","category","id","read","to","sender","variables","username","post","title","comment","content","substr","onEnter","query","cursor","pageInfo","endCursor","updateQuery","previousResult","fetchMoreResult","hasNextPage","newEdges","__typename"],"mappings":"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","file":"24.main.js","sourcesContent":["function _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends;","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nmodule.exports = _interopRequireDefault;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(_react.default.Fragment, null, _react.default.createElement(\"path\", {\n  d: \"M10 12H6V8H4v12h16V8H10z\",\n  opacity: \".3\"\n}), _react.default.createElement(\"path\", {\n  d: \"M20 6H10v2h10v12H4V8h2v4h2V4h6V0H6v6H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2z\"\n})), 'MarkunreadMailboxTwoTone');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = createSvgIcon;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _SvgIcon = _interopRequireDefault(require(\"@material-ui/core/SvgIcon\"));\n\nfunction createSvgIcon(path, displayName) {\n  var Component = _react.default.memo(_react.default.forwardRef(function (props, ref) {\n    return _react.default.createElement(_SvgIcon.default, (0, _extends2.default)({\n      ref: ref\n    }, props), path);\n  }));\n\n  if (process.env.NODE_ENV !== 'production') {\n    Component.displayName = \"\".concat(displayName, \"Icon\");\n  }\n\n  Component.muiName = _SvgIcon.default.muiName;\n  return Component;\n}","import React, { useState, lazy } from \"react\";\r\nimport { GET_NOTIFICATIONS, READ_NOTIFICATION } from \"../../Queries\";\r\nimport { useQuery, useMutation } from \"@apollo/client\";\r\nimport { Waypoint } from \"react-waypoint\";\r\nimport { ImpulseSpinner as Spinner } from \"react-spinners-kit\";\r\nimport { Link } from \"react-router-dom\";\r\nimport MarkunreadMailboxTwoToneIcon from \"@material-ui/icons/MarkunreadMailboxTwoTone\";\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\nconst Offline = lazy(() => import(\"./Offline\"));\r\nconst Box = lazy(() => import(\"../SVG/Box.svg\"));\r\n\r\nconst Notifications = () => {\r\n  const { loading, data, error, fetchMore, refetch } = useQuery(\r\n    GET_NOTIFICATIONS,\r\n    {\r\n      pollInterval: 600,\r\n    }\r\n  );\r\n  const [readNotif] = useMutation(READ_NOTIFICATION);\r\n  const [spin, setSpin] = useState(true);\r\n\r\n  if (loading || !data)\r\n    return (\r\n      <div className=\"spinner\">\r\n        <Spinner\r\n          size={50}\r\n          style={{\r\n            margin: \"auto\",\r\n          }}\r\n        />\r\n      </div>\r\n    );\r\n\r\n  if (error) {\r\n    return (\r\n      <>\r\n        <Offline />\r\n        <button className=\"btn btn-teal\" onClick={refetch}>\r\n          Refresh\r\n        </button>\r\n      </>\r\n    );\r\n  }\r\n\r\n  const more = () => {\r\n    fetchMore({\r\n      query: GET_NOTIFICATIONS,\r\n      variables: { cursor: data.selfNotification.pageInfo.endCursor },\r\n      updateQuery: (previousResult, { fetchMoreResult }) => {\r\n        setSpin(true);\r\n        if (!previousResult.selfNotification.pageInfo.hasNextPage) {\r\n          setSpin(false);\r\n          return previousResult;\r\n        }\r\n        const newEdges = fetchMoreResult.selfNotification.edges;\r\n        const pageInfo = fetchMoreResult.selfNotification.pageInfo;\r\n\r\n        return newEdges.length\r\n          ? {\r\n              selfNotification: {\r\n                __typename: previousResult.selfNotification.__typename,\r\n                edges: [...previousResult.selfNotification.edges, ...newEdges],\r\n                pageInfo,\r\n              },\r\n            }\r\n          : previousResult;\r\n      },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        className=\"mx-auto w-25\"\r\n        variant=\"outlined\"\r\n        color=\"secondary\"\r\n        startIcon={<MarkunreadMailboxTwoToneIcon />}\r\n        onClick={() => readNotif()}\r\n      >\r\n        Read All\r\n      </Button>\r\n      {data.selfNotification.edges.length == 0 && (\r\n        <div className=\"w-75 h-75 m-auto d-flex align-items-center justify-content-center flex-column\">\r\n          <NoData width=\"90%\" height=\"90%\" preserveAspectRatio />\r\n        </div>\r\n      )}\r\n      {data.selfNotification.edges.map(({ node }) => {\r\n        {\r\n          switch (node.category) {\r\n            case \"new_follow\":\r\n              return (\r\n                <div\r\n                  key={node.id}\r\n                  className={`notification ${node.read && \"notification-read\"}`}\r\n                >\r\n                  <Link\r\n                    to={`user/${node.sender.id}`}\r\n                    onClick={() =>\r\n                      node.read\r\n                        ? false\r\n                        : readNotif({ variables: { id: node.id } })\r\n                    }\r\n                  >\r\n                    {node.sender.username}\r\n                  </Link>{\" \"}\r\n                  Followed You!\r\n                </div>\r\n              );\r\n            case \"new_like\":\r\n              return (\r\n                <div\r\n                  key={node.id}\r\n                  className={`notification ${node.read && \"notification-read\"}`}\r\n                >\r\n                  <Link\r\n                    to={`user/${node.sender.id}`}\r\n                    onClick={() =>\r\n                      node.read\r\n                        ? false\r\n                        : readNotif({ variables: { id: node.id } })\r\n                    }\r\n                  >\r\n                    {node.sender.username}\r\n                  </Link>{\" \"}\r\n                  Liked your post{\" \"}\r\n                  <Link\r\n                    className=\"notification-post\"\r\n                    to={`post/${node.post.id}`}\r\n                    onClick={() =>\r\n                      node.read\r\n                        ? false\r\n                        : readNotif({ variables: { id: node.id } })\r\n                    }\r\n                  >\r\n                    {node.post.title}\r\n                  </Link>\r\n                </div>\r\n              );\r\n            case \"new_comment\":\r\n              return (\r\n                <div\r\n                  key={node.id}\r\n                  className={`notification ${node.read && \"notification-read\"}`}\r\n                >\r\n                  <Link\r\n                    to={`user/${node.sender.id}`}\r\n                    onClick={() =>\r\n                      node.read\r\n                        ? false\r\n                        : readNotif({ variables: { id: node.id } })\r\n                    }\r\n                  >\r\n                    {node.sender.username}\r\n                  </Link>{\" \"}\r\n                  Commented on your post \"\r\n                  <Link\r\n                    className=\"notification-post\"\r\n                    to={`post/${node.comment.post.id}`}\r\n                    className=\"notification-post-comment\"\r\n                    onClick={() =>\r\n                      node.read\r\n                        ? false\r\n                        : readNotif({ variables: { id: node.id } })\r\n                    }\r\n                  >\r\n                    {node.comment.post.title}\r\n                  </Link>\r\n                  \"\r\n                  <Link\r\n                    className=\"notification-post\"\r\n                    to={`post/${node.comment.post.id}/#${node.comment.id}c`}\r\n                    onClick={() =>\r\n                      node.read\r\n                        ? false\r\n                        : readNotif({ variables: { id: node.id } })\r\n                    }\r\n                  >\r\n                    {node.comment.content.substr(0, 60)}\r\n                  </Link>\r\n                </div>\r\n              );\r\n          }\r\n        }\r\n      })}\r\n      <Waypoint onEnter={more}>\r\n        <div className=\"refetch-and-spinner\">\r\n          <button className=\"btn btn-teal\" onClick={() => refetch()}>\r\n            Refetch\r\n          </button>\r\n          {spin && (\r\n            <div className=\"spinner\">\r\n              <Spinner size={40} />\r\n            </div>\r\n          )}\r\n        </div>\r\n      </Waypoint>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Notifications;\r\n"],"sourceRoot":""}