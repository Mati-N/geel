{"version":3,"sources":["webpack:///./node_modules/react-error-boundary/dist/react-error-boundary.umd.js","webpack:///./src/components/layout/Error.js","webpack:///./src/components/post/Post.js"],"names":["exports","React","Object","prototype","hasOwnProperty","call","initialState","error","info","ErrorBoundary","_React$Component","subClass","superClass","_this","_len","arguments","length","_args","Array","_key","apply","this","concat","state","resetErrorBoundary","_this$props","_len2","args","_key2","props","onReset","setState","create","constructor","__proto__","_proto","componentDidCatch","_this$props$onError","_this$props2","onError","componentStack","componentDidUpdate","prevProps","_this$props$onResetKe","_this$props3","a","b","resetKeys","some","item","index","is","onResetKeysChange","render","_this$state","_this$props4","fallbackRender","FallbackComponent","fallback","isValidElement","createElement","Error","children","Component","useErrorHandler","givenError","_React$useState","useState","setError","withErrorBoundary","errorBoundaryProps","Wrapped","name","displayName","defineProperty","value","factory","role","className","onClick","PostItem","lazy","Comments","Post","id","match","params","useQuery","GET_POST","variables","loading","data","fetchMore","refetch","spin","setSpin","size","node","posts","edges","key","user_id","user","username","show_comment","comments","postComments","onEnter","query","cursor","pageInfo","endCursor","updateQuery","previousResult","fetchMoreResult","hasNextPage","newEdges","post","__typename"],"mappings":"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","file":"7.main.js","sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('react')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'react'], factory) :\n  (global = global || self, factory(global.ReactErrorBoundary = {}, global.React));\n}(this, (function (exports, React) { 'use strict';\n\n  React = React && Object.prototype.hasOwnProperty.call(React, 'default') ? React['default'] : React;\n\n  function _inheritsLoose(subClass, superClass) {\n    subClass.prototype = Object.create(superClass.prototype);\n    subClass.prototype.constructor = subClass;\n    subClass.__proto__ = superClass;\n  }\n\n  var changedArray = function (a, b) {\n    if (a === void 0) {\n      a = [];\n    }\n\n    if (b === void 0) {\n      b = [];\n    }\n\n    return a.length !== b.length || a.some(function (item, index) {\n      return !Object.is(item, b[index]);\n    });\n  };\n\n  var initialState = {\n    error: null,\n    info: null\n  };\n\n  var ErrorBoundary = /*#__PURE__*/function (_React$Component) {\n    _inheritsLoose(ErrorBoundary, _React$Component);\n\n    function ErrorBoundary() {\n      var _this;\n\n      for (var _len = arguments.length, _args = new Array(_len), _key = 0; _key < _len; _key++) {\n        _args[_key] = arguments[_key];\n      }\n\n      _this = _React$Component.call.apply(_React$Component, [this].concat(_args)) || this;\n      _this.state = initialState;\n\n      _this.resetErrorBoundary = function () {\n        var _this$props;\n\n        for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          args[_key2] = arguments[_key2];\n        }\n\n        _this.props.onReset == null ? void 0 : (_this$props = _this.props).onReset.apply(_this$props, args);\n\n        _this.setState(initialState);\n      };\n\n      return _this;\n    }\n\n    var _proto = ErrorBoundary.prototype;\n\n    _proto.componentDidCatch = function componentDidCatch(error, info) {\n      var _this$props$onError, _this$props2;\n\n      (_this$props$onError = (_this$props2 = this.props).onError) == null ? void 0 : _this$props$onError.call(_this$props2, error, info == null ? void 0 : info.componentStack);\n      this.setState({\n        error: error,\n        info: info\n      });\n    };\n\n    _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n      var error = this.state.error;\n      var resetKeys = this.props.resetKeys;\n\n      if (error !== null && changedArray(prevProps.resetKeys, resetKeys)) {\n        var _this$props$onResetKe, _this$props3;\n\n        (_this$props$onResetKe = (_this$props3 = this.props).onResetKeysChange) == null ? void 0 : _this$props$onResetKe.call(_this$props3, prevProps.resetKeys, resetKeys);\n        this.setState(initialState);\n      }\n    };\n\n    _proto.render = function render() {\n      var _this$state = this.state,\n          error = _this$state.error,\n          info = _this$state.info;\n      var _this$props4 = this.props,\n          fallbackRender = _this$props4.fallbackRender,\n          FallbackComponent = _this$props4.FallbackComponent,\n          fallback = _this$props4.fallback;\n\n      if (error !== null) {\n        var props = {\n          componentStack: info == null ? void 0 : info.componentStack,\n          error: error,\n          resetErrorBoundary: this.resetErrorBoundary\n        };\n\n        if ( /*#__PURE__*/React.isValidElement(fallback)) {\n          return fallback;\n        } else if (typeof fallbackRender === 'function') {\n          return fallbackRender(props);\n        } else if (FallbackComponent) {\n          return /*#__PURE__*/React.createElement(FallbackComponent, props);\n        } else {\n          throw new Error('react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop');\n        }\n      }\n\n      return this.props.children;\n    };\n\n    return ErrorBoundary;\n  }(React.Component);\n\n  function withErrorBoundary(Component, errorBoundaryProps) {\n    function Wrapped(props) {\n      return /*#__PURE__*/React.createElement(ErrorBoundary, errorBoundaryProps, /*#__PURE__*/React.createElement(Component, props));\n    } // Format for display in DevTools\n\n\n    var name = Component.displayName || Component.name || 'Unknown';\n    Wrapped.displayName = \"withErrorBoundary(\" + name + \")\";\n    return Wrapped;\n  }\n\n  function useErrorHandler(givenError) {\n    var _React$useState = React.useState(null),\n        error = _React$useState[0],\n        setError = _React$useState[1];\n\n    if (givenError) throw givenError;\n    if (error) throw error;\n    return setError;\n  }\n\n  exports.ErrorBoundary = ErrorBoundary;\n  exports.useErrorHandler = useErrorHandler;\n  exports.withErrorBoundary = withErrorBoundary;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=react-error-boundary.umd.js.map\n","import React from \"react\";\r\n\r\nfunction Error({ error, componentStack, resetErrorBoundary }) {\r\n  return (\r\n    <div role=\"alert\">\r\n      <p>Something went wrong:</p>\r\n      <pre>{componentStack}</pre>\r\n      <button className=\"btn-teal btn\" onClick={resetErrorBoundary}>\r\n        Try again\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Error;\r\n","import React, { useState, lazy } from \"react\";\r\nimport { Waypoint } from \"react-waypoint\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { GET_POST } from \"../../Queries\";\r\nimport { ImpulseSpinner as Spinner } from \"react-spinners-kit\";\r\nimport { ErrorBoundary } from \"react-error-boundary\";\r\nimport Error from \"../layout/Error\";\r\n\r\nconst PostItem = lazy(() => import(\"./PostItem\"));\r\nconst Comments = lazy(() => import(\"./Comments\"));\r\n\r\nconst Post = ({\r\n  match: {\r\n    params: { id },\r\n  },\r\n}) => {\r\n  const { loading, data, error, fetchMore, refetch } = useQuery(GET_POST, {\r\n    variables: { id },\r\n  });\r\n  const [spin, setSpin] = useState(true);\r\n\r\n  const more = () => {\r\n    fetchMore({\r\n      query: GET_POST,\r\n      variables: { cursor: data.postComments.pageInfo.endCursor, id },\r\n      updateQuery: (previousResult, { fetchMoreResult }) => {\r\n        setSpin(true);\r\n        if (!previousResult.postComments.pageInfo.hasNextPage) {\r\n          setSpin(false);\r\n          return previousResult;\r\n        }\r\n        const newEdges = fetchMoreResult.postComments.edges;\r\n        const pageInfo = fetchMoreResult.postComments.pageInfo;\r\n\r\n        return newEdges.length\r\n          ? {\r\n              post: {\r\n                ...previousResult.post,\r\n                postComments: {\r\n                  __typename: previousResult.postComments.__typename,\r\n                  edges: [...previousResult.postComments.edges, ...newEdges],\r\n                  pageInfo,\r\n                },\r\n              },\r\n            }\r\n          : previousResult;\r\n      },\r\n    });\r\n    setSpin(false);\r\n  };\r\n\r\n  if (loading && !data) {\r\n    return <Spinner size={40} />;\r\n  }\r\n  const { node } = data.posts.edges[0];\r\n\r\n  return (\r\n    <ErrorBoundary FallbackComponent={Error}>\r\n      <>\r\n        <PostItem\r\n          key={node.id}\r\n          user_id={node.user.id}\r\n          username={node.user.username}\r\n          show_comment={true}\r\n          {...node}\r\n        />\r\n        <Comments comments={data.postComments.edges} />\r\n\r\n        <Waypoint onEnter={more}>\r\n          <div className=\"spinner\">\r\n            {(loading || spin) && <Spinner size={40} />}\r\n          </div>\r\n        </Waypoint>\r\n      </>\r\n    </ErrorBoundary>\r\n  );\r\n};\r\n\r\nexport default Post;\r\n"],"sourceRoot":""}